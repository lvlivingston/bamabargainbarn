{% extends 'base.html' %}
{% load static %}

{% block content %}
    <h1>Check Out</h1>
    <hr>

    {% if order.items.all %}
        <ul>
            {% for item in order.items.all %}
                <li>
                    {% if item.product.image %}
                        <img src="{{ item.product.image.url }}" alt="{{ item.product.title }}" style="max-width: 30px;">
                    {% endif %}
                    <h5>{{ item.product.title }}</h5>
                    <p>Price: ${{ item.product.price }} (per item)</p>
                    <p>Quantity: {{ item.quantity }}</p>
                    <!-- <p>Subtotal: ${{ item.sub_item_price }}</p> -->
                </li>
            {% endfor %}
        </ul>
        <hr>
        <h4>Shipping Details</h4>
        <form action="{% url 'pay' order.id %}" method="post">
            {% csrf_token %}
            <label for="first_name">First Name:</label>
            <input type="text" name="first_name" required>
            
            <label for="last_name">Last Name:</label>
            <input type="text" name="last_name" required>
            
            <label for="street_address">Street Address:</label>
            <input type="text" name="street_address" required>

            <label for="city">City:</label>
            <input type="text" name="city" required>
            
            <label for="state">State:</label>
            <input type="text" name="State" required>

            <label for="zip">Zip:</label>
            <input type="text" name="zip" required>

            <label for="email">Email:</label>
            <input type="email" name="email" required>
            
            <label for="phone">Phone:</label>
            <input type="phone" name="phone" >

            <p>Order Subtotal: ${{ sub_order_price }}</p>
            <p>Taxes: <i>calculated on the next screen</i></p>
            <p>Shipping: <i>calculated on the next screen</i></p>
            <p>Final Price: ${{ sub_order_price }}</p>
            <button type="submit">Pay</button>
        </form>
    {% else %}
    {% endif %}
    <script src="{% static 'main.js' %}"></script>
{% endblock %}